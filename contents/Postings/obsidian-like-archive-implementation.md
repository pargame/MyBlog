---
title: '옵시디언식 아카이브(Archive)와 그래프 뷰 구현기'
summary: '마크다운 기반 컨텐츠를 불러와 vis-network로 관계 그래프를 그리고, 사이드바로 문서를 미리보는 아카이브 기능을 어떻게 만들었는지 단계별로 설명합니다.'
date: '2025-09-11T19:15:00+09:00'
---

안녕하세요! 이 포스트에서는 제 블로그에 옵시디언(Obsidian)처럼 문서들 간의 연결을 시각적으로 탐색할 수 있는 아카이브(Archive) 기능을 어떻게 구현했는지 이야기해 보겠습니다. 마크다운 파일을 기반으로 그래프를 그리고, 클릭하면 사이드바에서 문서를 미리볼 수 있는 기능인데요, 방문자분들이 비슷한 걸 만들어보고 싶으시면 참고가 되셨으면 좋겠습니다.

## 왜 이 기능을 만들었나요?

블로그를 운영하다 보니 포스트뿐 아니라 기술 문서나 노트들이 쌓이기 시작했어요. 예를 들어, Unreal Engine 관련 문서가 수백 개가 되면서 그냥 텍스트 검색만으로는 전체 구조를 파악하기가 어려웠죠. 옵시디언처럼 문서들 사이의 링크를 그래프로 시각화하면, 아이디어를 연결지어 생각하기가 훨씬 수월해질 것 같았습니다. 그래서 Vite와 React를 활용해 간단한 아카이브 뷰를 만들어 보았어요.

## 전체적인 아이디어와 구조

기본 개념은 간단합니다:
- `contents/Archives/` 폴더에 마크다운 파일들을 넣어두고, 각 파일에서 `[[슬러그]]` 형식의 위키 링크를 찾아서 관계를 추출합니다.
- 추출한 노드(문서)와 엣지(링크)를 vis-network 라이브러리로 그래프를 그립니다.
- 그래프에서 노드를 클릭하면, 사이드바가 열리면서 해당 문서를 미리볼 수 있게 합니다.

이렇게 하면 방문자가 블로그에서 문서들을 탐색하는 재미가 더해질 거예요. 이제 구현 과정을 단계별로 살펴보겠습니다.

## 1. 마크다운 파일 로드하기

먼저, 마크다운 파일들을 어떻게 불러올까 고민했어요. Vite의 `import.meta.glob`을 사용하면 빌드 타임에 모든 파일을 찾아서 모듈로 만들 수 있습니다. 예를 들어:

```typescript
const modules = import.meta.glob('../../contents/Archives/*/*.md', {
  query: '?raw',
  import: 'default',
});
```

이렇게 하면 `contents/Archives/` 아래의 모든 `.md` 파일을 텍스트로 로드할 수 있어요. 각 파일의 프론트매터(제목, 날짜 등)를 파싱하고, 본문에서 `[[슬러그]]` 패턴을 찾아서 노드와 엣지를 만듭니다.

## 2. 그래프 렌더링

노드와 엣지를 준비했으면, vis-network로 그래프를 그립니다. `src/pages/Archive.tsx` 파일에서 이렇게 설정했어요:

```typescript
const options = {
  nodes: { shape: 'dot', size: 14 },
  physics: {
    enabled: true,
    solver: 'barnesHut',
    barnesHut: { /* 튜닝 파라미터 */ },
    stabilization: { /* 초기 레이아웃 안정화 */ },
  },
  edges: { arrows: { to: false } },
  interaction: { /* 드래그, 줌 등 설정 */ },
};

const network = new Network(containerRef.current, data, options);
```

특히, 큰 문서셋에서는 물리 시뮬레이션이 과도하게 작동해서 성능이 떨어질 수 있어요. 그래서 stabilization 옵션으로 초기 레이아웃을 빠르게 잡고, 이후에는 물리를 끄거나 튜닝했습니다.

## 3. 사이드바와 문서 미리보기

그래프에서 노드를 클릭하면, `ArchiveSidebar` 컴포넌트가 열리면서 문서를 보여줍니다. 이 컴포넌트는 `MarkdownViewer`를 내장해서 마크다운을 HTML로 변환하고, 내부의 위키 링크를 클릭하면 사이드바 내에서 바로 다른 문서로 전환할 수 있게 했어요.

사이드바는 부드러운 애니메이션으로 열리고 닫히며, 바깥을 클릭하면 자동으로 닫히도록 했습니다. 이렇게 하면 방문자가 그래프를 탐색하면서 문서를 빠르게 확인할 수 있어요.

## 성능과 UX 개선

처음에는 큰 그래프(예: Unreal Engine 문서 100개 이상)에서 레이아웃이 느리고, 초기 드래그가 안 먹히는 문제가 있었어요. 그래서:
- `improvedLayout` 옵션을 비활성화해서 계산량을 줄였습니다.
- stabilization 파라미터를 조정해서 초기 로딩을 빠르게 했어요.
- 레이아웃 진행 중에는 작은 오버레이로 "그래프 레이아웃 진행 중..." 메시지를 보여서 방문자가 기다리는 걸 알 수 있게 했습니다.

이렇게 튜닝하니, 큰 문서셋에서도 부드럽게 작동하게 되었어요.

## 테스트해보기

로컬에서 `npm run dev`를 실행한 후, `/archives/<폴더명>` (예: `/archives/UnrealEngine`)으로 가서 그래프를 확인해 보세요. 노드를 클릭하면 사이드바가 열리고, 문서 내 링크를 클릭하면 사이드바에서 바로 전환됩니다. 방문자분들도 이 기능을 즐겨보셨으면 좋겠어요!

## 마무리

이 기능은 Vite의 강력한 빌드 시스템과 vis-network의 시각화 능력을 활용해서 만들었어요. 아직 개선할 점이 많지만, 기본적인 옵시디언풍 탐색 경험을 제공할 수 있게 되었습니다. 비슷한 걸 구현하시는 분들은 `import.meta.glob`과 vis-network를 먼저 공부해 보세요.

이 포스트가 도움이 되셨기를 바랍니다. 감사합니다! 😊
